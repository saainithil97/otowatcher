{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Aquarium Timelapse Configuration",
  "type": "object",
  "required": [
    "capture_interval_seconds",
    "resolution",
    "storage_path",
    "log_path"
  ],
  "properties": {
    "capture_interval_seconds": {
      "type": "integer",
      "minimum": 60,
      "maximum": 86400,
      "description": "Interval between captures in seconds (1 min to 24 hours)"
    },
    "lights_only_mode": {
      "type": "boolean",
      "description": "Only capture when lights are detected as on"
    },
    "light_threshold": {
      "type": "number",
      "minimum": 0,
      "maximum": 1000,
      "description": "Light detection threshold"
    },
    "keep_days": {
      "type": "integer",
      "minimum": 1,
      "maximum": 365,
      "description": "Days to keep images locally"
    },
    "image_quality": {
      "type": "integer",
      "minimum": 1,
      "maximum": 100,
      "description": "JPEG quality (1-100)"
    },
    "resolution": {
      "type": "object",
      "required": ["width", "height"],
      "properties": {
        "width": {
          "type": "integer",
          "minimum": 640,
          "maximum": 4056
        },
        "height": {
          "type": "integer",
          "minimum": 480,
          "maximum": 3040
        }
      }
    },
    "storage_path": {
      "type": "string",
      "minLength": 1,
      "description": "Path to store captured images"
    },
    "log_path": {
      "type": "string",
      "minLength": 1,
      "description": "Path to log file"
    },
    "capture_window": {
      "type": "object",
      "required": ["enabled", "start_time", "end_time"],
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable time-based capture window"
        },
        "start_time": {
          "type": "string",
          "pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$",
          "description": "Start time in HH:MM format (24-hour)"
        },
        "end_time": {
          "type": "string",
          "pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$",
          "description": "End time in HH:MM format (24-hour)"
        }
      }
    },
    "camera_settings": {
      "type": "object",
      "properties": {
        "exposure_compensation": {
          "type": "number",
          "minimum": -2.0,
          "maximum": 2.0,
          "description": "Exposure compensation (-2.0 to 2.0)"
        },
        "awb_mode": {
          "type": "string",
          "enum": ["auto", "custom"],
          "description": "Auto white balance mode"
        },
        "awb_gains_red": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 8.0,
          "description": "Red gain for custom white balance"
        },
        "awb_gains_blue": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 8.0,
          "description": "Blue gain for custom white balance"
        },
        "metering_mode": {
          "type": "string",
          "enum": ["CentreWeighted", "Spot", "Matrix"],
          "description": "Exposure metering mode"
        },
        "sharpness": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 16.0,
          "description": "Image sharpness"
        },
        "contrast": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 32.0,
          "description": "Image contrast"
        },
        "brightness": {
          "type": "number",
          "minimum": -1.0,
          "maximum": 1.0,
          "description": "Image brightness"
        },
        "saturation": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 32.0,
          "description": "Image saturation"
        }
      }
    }
  }
}
